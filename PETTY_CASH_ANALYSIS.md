# ุชุญููู ูุธุงู ุงูุนููุฏ (Petty Cash) - Analysis & Improvement Plan

## ๐ ุงููุถุน ุงูุญุงูู (Current Implementation)

### โ ูุง ูุนูู ุญุงููุงู:

1. **ูููุฐุฌ PettyCash:**
   - ูุชุชุจุน ุญุณุงุจ ุงูุนูุฏุฉ ูุน ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู
   - ูุฑุชุจุท ุจููุธู (ุงููุณุชุฃูู)
   - ูุญุชูู ุนูู ุญุณุงุจ ุงูุฑุตูุฏ ุงูุญุงูู (`current_balance`)

2. **ูููุฐุฌ Voucher:**
   - ูููู ุฑุจุทู ุจุงูุนูุฏุฉ (`petty_cash_id`)
   - ููุนูู: ูุจุถ (Receipt) ุฃู ุตุฑู (Payment)
   - ูุฑุชุจุท ุจุทุฑู ููุงุจู (counterparty)

3. **ูููุฐุฌ PettyCashTransaction:**
   - ูุชุชุจุน ุงููุนุงููุงุช (in/out)
   - ูุฑุชุจุท ุจ Voucher (nullable)
   - ูุญุชูู ุนูู: amount, direction, description, date

4. **ุงููุญุงุณุจุฉ ุงูุชููุงุฆูุฉ:**
   - ุนูุฏ ุฅูุดุงุก Voucher ูุชู ุชุณุฌูู ููุฏ ูุญุงุณุจู ุชููุงุฆูุงู

### โ ุงููุดุงูู ูุงููุฌูุงุช:

#### 1. **ุตุนูุจุฉ ุชุณุฌูู ุงููุตุฑููุงุช ุงูุจุณูุทุฉ:**
   - ุญุงููุงู: ูุชุณุฌูู ูุตุฑูู ุจุณูุท (ูุซู ุฃูู/ุดุฑุจ ุฃู ุชุตููุญ)ุ ูุฌุจ ุฅูุดุงุก Voucher ูุงูู ูุน:
     - voucher_number
     - counterparty_type (ููุน ุงูุทุฑู ุงูููุงุจู)
     - counterparty_id (ุงูุทุฑู ุงูููุงุจู)
   - ูุฐุง ูุนูุฏ ุฌุฏุงู ููุตุฑููุงุช ุจุณูุทุฉ!

#### 2. **ูุง ููุฌุฏ ูุงุฌูุฉ ูุจุงุดุฑุฉ ูุชุณุฌูู ุงููุนุงููุงุช:**
   - ูุง ููุฌุฏ PettyCashTransaction Resource ูู Filament
   - ุงููุนุงููุงุช ุชููุดุฃ ููุท ูู ุฎูุงู Vouchers
   - ูุง ูููู ูููุณุชุฃูู ุชุณุฌูู ูุตุฑูู ุจุณูููุฉ

#### 3. **ุตุนูุจุฉ ุชุณุฌูู ุงูุชุฒููุฏุงุช (Replenishments):**
   - ูุชุณุฌูู ุชุฒููุฏ (ุฅุถุงูุฉ ุฃููุงู ููุนูุฏุฉ)ุ ูุฌุจ:
     - ุฅูุดุงุก Voucher ููุน Receipt
     - ุชุญุฏูุฏ counterparty
     - ูุฐุง ุบูุฑ ููุงุณุจ ููุนูููุฉ ุงูุจุณูุทุฉ ุงููุทููุจุฉ

#### 4. **ูุง ููุฌุฏ ุชุตููู ูููุตุฑููุงุช:**
   - ูุง ููุฌุฏ ุญูู ูุชุญุฏูุฏ ููุน ุงููุตุฑูู (ุทุนุงูุ ุตูุงูุฉุ ุฑุงุชุจุ ุฅูุฎ)
   - ุตุนุจ ุฅุนุฏุงุฏ ุงูุชูุงุฑูุฑ ุญุณุจ ููุน ุงููุตุฑูู

#### 5. **ุนุฏู ุฑุจุท ุงููุนุงููุงุช ุจุงูุณูุฏุงุช:**
   - VoucherObserver ูุง ููุดุฆ PettyCashTransaction ุชููุงุฆูุงู
   - ููุงู ูุฌูุฉ ุจูู Vouchers ู PettyCashTransactions

## ๐ฏ ุงููุชุทูุจุงุช (Requirements)

### ุงููุณุชุฃูู ูุญุชุงุฌ:
1. โ ุชุณุฌูู **ูู ุฌููู** ููุตุฑู ุจุณูููุฉ
2. โ ุชุญุฏูุฏ **ููุน ุงููุตุฑูู** (ุทุนุงูุ ุตูุงูุฉุ ุฑุงุชุจ ุนุงููุ ุฅูุฎ)
3. โ ุชุณุฌูู **ุงูุชุฒููุฏุงุช** ุจุณูููุฉ ุนูุฏ ููุงุฏ ุงูุฑุตูุฏ
4. โ ุฑุคูุฉ **ุงูุฑุตูุฏ ุงูุญุงูู** ูู ูู ููุช
5. โ **ุชูุงุฑูุฑ ููุตูุฉ** ุนู ูู ูุตุฑูู

## ๐ ุงูุฎุทุฉ ุงูููุชุฑุญุฉ (Implementation Plan)

### ุงููุฑุญูุฉ 1: ุฅุถุงูุฉ ุชุตููู ุงููุตุฑููุงุช

**1.1 ุฅูุดุงุก Enum ูููุตุฑููุงุช:**
```php
ExpenseCategory enum:
- Food (ุทุนุงู)
- Drinks (ูุดุฑูุจุงุช)
- MachineRepair (ุตูุงูุฉ ูุงูููุงุช)
- WorkerSalary (ุฑุงุชุจ ุนูุงู)
- Transportation (ููู)
- Utilities (ููุฑุจุงุก/ูุงุก)
- Maintenance (ุตูุงูุฉ ุนุงูุฉ)
- Other (ุฃุฎุฑู)
```

**1.2 ุฅุถุงูุฉ migration ูุฅุถุงูุฉ expense_category:**
- ุฅุถุงูุฉ ุญูู `expense_category` ูู `petty_cash_transactions`
- ูููู ุฃู ูููู nullable ููุชูุงูู ูุน ุงูุจูุงูุงุช ุงููุฏููุฉ

### ุงููุฑุญูุฉ 2: ุฅูุดุงุก PettyCashTransaction Resource

**2.1 Resource ูุงูู:**
- List: ุฌุฏูู ุจูู ุงููุนุงููุงุช ูุน ุงูุฑุตูุฏ ุจุนุฏ ูู ูุนุงููุฉ
- Create: ูููุฐุฌ ุจุณูุท ูุชุณุฌูู ูุตุฑูู ุฌุฏูุฏ
- Edit: ุชุนุฏูู ุงููุนุงููุงุช (ุฅุฐุง ูู ุชูู ูุฑุชุจุทุฉ ุจุณูุฏ)

**2.2 ุงููููุฐุฌ ูุญุชูู ุนูู:**
- Petty Cash (automatic selection)
- Date (default: today)
- Direction (Out for expenses, In for replenishments)
- Amount
- Expense Category (for Out transactions)
- Description (required, detailed)
- Voucher Link (optional, if linked to voucher)

**2.3 ุงูุฌุฏูู ูุญุชูู ุนูู:**
- Date
- Direction (with icons/colors)
- Amount
- Category (if expense)
- Description
- Balance After (running balance)
- Voucher Number (if linked)
- Recorded By

### ุงููุฑุญูุฉ 3: Relation Manager ูู PettyCash Resource

**3.1 ุฅุถุงูุฉ Relation Manager:**
- ูุนุฑุถ ูู ูุนุงููุงุช ุงูุนูุฏุฉ
- ูุนุฑุถ ุงูุฑุตูุฏ ุงูุญุงูู
- Quick Actions:
  - Add Expense (ูุตุฑูู)
  - Add Replenishment (ุชุฒููุฏ)
  - Export Report (ุชุตุฏูุฑ ุชูุฑูุฑ)

**3.2 Summary Cards:**
- ุงูุฑุตูุฏ ุงูุญุงูู
- ุฅุฌูุงูู ุงููุตุฑููุงุช ูุฐุง ุงูุดูุฑ
- ุฅุฌูุงูู ุงูุชุฒููุฏุงุช ูุฐุง ุงูุดูุฑ
- ุขุฎุฑ ูุนุงููุฉ

### ุงููุฑุญูุฉ 4: ุชุณููู ุงูุชุฒููุฏุงุช (Replenishments)

**4.1 Quick Replenishment Action:**
- Action ูู PettyCash resource
- ูููุฐุฌ ุจุณูุท: Amount + Description + Date
- ููุดุฆ ูุนุงููุฉ In ุชููุงุฆูุงู
- ููุดุฆ Voucher Receipt ุชููุงุฆูุงู (ูููุญุงุณุจุฉ)

**4.2 ุฃู Page ูููุตูุฉ:**
- ุตูุญุฉ ูุฎุตุตุฉ ููุชุฒููุฏ
- ูููู ุฑุจุทูุง ุจู Voucher ูุฏููุงู ุฃู ุชููุงุฆูุงู

### ุงููุฑุญูุฉ 5: ุฑุจุท Vouchers ุจุงููุนุงููุงุช ุชููุงุฆูุงู

**5.1 ุชุญุฏูุซ VoucherObserver:**
- ุนูุฏ ุฅูุดุงุก Voucher ูุฑุชุจุท ุจู petty_cash_id:
  - ุฅูุดุงุก PettyCashTransaction ุชููุงุฆูุงู
  - direction = payment/receipt ุจูุงุกู ุนูู voucher_type
  - ุฑุจุทูุง ุจู voucher_id

**5.2 ุชุญุฏูุซ PettyCashTransaction Observer:**
- ุนูุฏ ุฅูุดุงุก ูุนุงููุฉ Out:
  - ุฅูุดุงุก ููุฏ ูุญุงุณุจู (ุฅุฐุง ูู ุชูู ูุฑุชุจุทุฉ ุจู voucher)
  - ุงุณุชุฎุฏุงู expense_category ูุชุญุฏูุฏ ุญุณุงุจ ุงููุตุฑูู ุงูููุงุณุจ

### ุงููุฑุญูุฉ 6: ููุงุนุฏ ุงููุญุงุณุจุฉ ูููุตุฑููุงุช

**6.1 ุฅุถุงูุฉ Posting Rules:**
```php
- petty_cash.expense.food โ Debit: 5200 (Food Expenses), Credit: 1120 (Petty Cash)
- petty_cash.expense.repair โ Debit: 5300 (Maintenance), Credit: 1120
- petty_cash.expense.salary โ Debit: 5210 (Salaries), Credit: 1120
- petty_cash.replenishment โ Debit: 1120, Credit: 1110 (Cash)
```

**6.2 ุชุญุฏูุซ PostingService:**
- ุฏุนู context ูููุฆุงุช ุงููุฎุชููุฉ
- ุงุฎุชูุงุฑ ุญุณุงุจ ุงููุตุฑูู ุจูุงุกู ุนูู expense_category

### ุงููุฑุญูุฉ 7: ุงูุชูุงุฑูุฑ

**7.1 ุชูุงุฑูุฑ PettyCash:**
- ุชูุฑูุฑ ูุตุฑููุงุช ุญุณุจ ุงููุฆุฉ
- ุชูุฑูุฑ ูุตุฑููุงุช ุญุณุจ ุงููุชุฑุฉ
- ุชูุฑูุฑ ุงูุชุฒููุฏุงุช
- ูุดู ุญุณุงุจ ูุงูู ููุนูุฏุฉ

**7.2 Dashboard Widgets:**
- ุฃุฑุตุฏุฉ ุงูุนูุฏ ุงูุญุงููุฉ
- ุงููุตุฑููุงุช ุงูููู/ูุฐุง ุงูุดูุฑ
- ุชูุจููุงุช ุนูุฏ ุงูุฎูุงุถ ุงูุฑุตูุฏ

## ๐ง ุงูุชุนุฏููุงุช ุงูุชูููุฉ ุงููุทููุจุฉ

### 1. Database Changes:
- โ ุฅุถุงูุฉ `expense_category` ุฅูู `petty_cash_transactions`
- โ๏ธ ุฅุถุงูุฉ `reference_number` ููุฑุจุท ุจุฃุฑูุงู ูุฑุฌุนูุฉ ุฎุงุฑุฌูุฉ

### 2. Models:
- โ ุฅุถุงูุฉ ExpenseCategory enum
- โ ุชุญุฏูุซ PettyCashTransaction model
- โ ุฅุถุงูุฉ methods ูุณุงุนุฏุฉ

### 3. Observers:
- โ ุชุญุฏูุซ VoucherObserver ูุฅูุดุงุก PettyCashTransaction
- โ ุฅูุดุงุก PettyCashTransactionObserver ูููุญุงุณุจุฉ

### 4. Resources:
- โ ุฅูุดุงุก PettyCashTransactionResource
- โ ุฅุถุงูุฉ RelationManager ูู PettyCashResource
- โ ุฅุถุงูุฉ Quick Actions

### 5. Posting Rules:
- โ ุฅุถุงูุฉ ููุงุนุฏ ูููุตุฑููุงุช ุงููุฎุชููุฉ
- โ ุชุญุฏูุซ PostingService ูุฏุนู ุงููุฆุงุช

## ๐ ููุฎุต ุงูุฎุทุฉ

### ุงููุฑุญูุฉ ุงูุฃููู (Priority 1):
1. ุฅูุดุงุก ExpenseCategory enum
2. ุฅุถุงูุฉ migration
3. ุฅูุดุงุก PettyCashTransactionResource
4. ุชุญุฏูุซ VoucherObserver

### ุงููุฑุญูุฉ ุงูุซุงููุฉ (Priority 2):
5. ุฅุถุงูุฉ Relation Manager
6. Quick Replenishment Action
7. PettyCashTransactionObserver
8. Posting Rules ูููุตุฑููุงุช

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ (Priority 3):
9. ุงูุชูุงุฑูุฑ
10. Dashboard Widgets

## โ ุงููุชูุฌุฉ ุงููุชููุนุฉ

ุจุนุฏ ุงูุชูููุฐ:
- โ ุงููุณุชุฃูู ูุณุฌู ูู ูุตุฑูู ุจุณูููุฉ (ูููุฐุฌ ูุงุญุฏ ุจุณูุท)
- โ ูู ูุตุฑูู ููุตูู ููุฑุชุจุท ุจููุนู
- โ ุงูุชุฒููุฏุงุช ุชูุณุฌู ุจุถุบุทุฉ ูุงุญุฏุฉ
- โ ุงูุฑุตูุฏ ููุญุณุจ ุชููุงุฆูุงู
- โ ุงููุญุงุณุจุฉ ุชุชู ุชููุงุฆูุงู ููู ูุนุงููุฉ
- โ ุงูุชูุงุฑูุฑ ูุชุงุญุฉ ุจุณูููุฉ

